!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).SelectInput=e()}(this,function(){"use strict";function t(t,e){return t(e={exports:{}},e.exports),e.exports}var e=t(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),n=t(function(t){var e=t.exports={version:"2.6.3"};"number"==typeof __e&&(__e=e)}),r=(n.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),i=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t},o=function(t){try{return!!t()}catch(t){return!0}},u=!o(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),c=e.document,a=r(c)&&r(c.createElement),s=function(t){return a?c.createElement(t):{}},l=!u&&!o(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}),f=Object.defineProperty,p={f:u?Object.defineProperty:function(t,e,n){if(i(t),e=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(e,!0),i(n),l)try{return f(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},h=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v=u?function(t,e,n){return p.f(t,e,h(1,n))}:function(t,e,n){return t[e]=n,t},d={}.hasOwnProperty,y=function(t,e){return d.call(t,e)},m=0,g=Math.random(),_=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++m+g).toString(36))},b=t(function(t){var r=_("src"),i=Function.toString,o=(""+i).split("toString");n.inspectSource=function(t){return i.call(t)},(t.exports=function(t,n,i,u){var c="function"==typeof i;c&&(y(i,"name")||v(i,"name",n)),t[n]!==i&&(c&&(y(i,r)||v(i,r,t[n]?""+t[n]:o.join(String(n)))),t===e?t[n]=i:u?t[n]?t[n]=i:v(t,n,i):(delete t[n],v(t,n,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[r]||i.call(this)})}),x=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},S=function(t,r,i){var o,u,c,a,s=t&S.F,l=t&S.G,f=t&S.S,p=t&S.P,h=t&S.B,d=l?e:f?e[r]||(e[r]={}):(e[r]||{}).prototype,y=l?n:n[r]||(n[r]={}),m=y.prototype||(y.prototype={});for(o in l&&(i=r),i)c=((u=!s&&d&&void 0!==d[o])?d:i)[o],a=h&&u?x(c,e):p&&"function"==typeof c?x(Function.call,c):c,d&&b(d,o,c,t&S.U),y[o]!=c&&v(y,o,a),p&&m[o]!=c&&(m[o]=c)};e.core=n,S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;var k=S,I={}.toString,w=function(t){return I.call(t).slice(8,-1)},E=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==w(t)?t.split(""):Object(t)},C=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},O=function(t){return Object(C(t))},L=Math.ceil,j=Math.floor,A=function(t){return isNaN(t=+t)?0:(t>0?j:L)(t)},T=Math.min,P=function(t){return t>0?T(A(t),9007199254740991):0},R=Array.isArray||function(t){return"Array"==w(t)},M=t(function(t){var r=e["__core-js_shared__"]||(e["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),F=t(function(t){var n=M("wks"),r=e.Symbol,i="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=i&&r[t]||(i?r:_)("Symbol."+t))}).store=n}),K=F("species"),N=function(t,e){return new(function(t){var e;return R(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!R(e.prototype)||(e=void 0),r(e)&&null===(e=e[K])&&(e=void 0)),void 0===e?Array:e}(t))(e)},D=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,u=6==t,c=5==t||u,a=e||N;return function(e,s,l){for(var f,p,h=O(e),v=E(h),d=x(s,l,3),y=P(v.length),m=0,g=n?a(e,y):r?a(e,0):void 0;y>m;m++)if((c||m in v)&&(p=d(f=v[m],m,h),t))if(n)g[m]=p;else if(p)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:g.push(f)}else if(o)return!1;return u?-1:i||o?o:g}},H=F("unscopables"),G=Array.prototype;null==G[H]&&v(G,H,{});var $=function(t){G[H][t]=!0},V=D(6),q="findIndex",B=!0;q in[]&&Array(1)[q](function(){B=!1}),k(k.P+k.F*B,"Array",{findIndex:function(t){return V(this,t,arguments.length>1?arguments[1]:void 0)}}),$(q);var X=p.f,U=Function.prototype,W=/^\s*function ([^ (]*)/;"name"in U||u&&X(U,"name",{configurable:!0,get:function(){try{return(""+this).match(W)[1]}catch(t){return""}}});var z,J=function(t,e){return{value:e,done:!!t}},Q={},Y=function(t){return E(C(t))},Z=Math.max,tt=Math.min,et=M("keys"),nt=function(t){return et[t]||(et[t]=_(t))},rt=(z=!1,function(t,e,n){var r,i=Y(t),o=P(i.length),u=function(t,e){return(t=A(t))<0?Z(t+e,0):tt(t,e)}(n,o);if(z&&e!=e){for(;o>u;)if((r=i[u++])!=r)return!0}else for(;o>u;u++)if((z||u in i)&&i[u]===e)return z||u||0;return!z&&-1}),it=nt("IE_PROTO"),ot="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),ut=Object.keys||function(t){return function(t,e){var n,r=Y(t),i=0,o=[];for(n in r)n!=it&&y(r,n)&&o.push(n);for(;e.length>i;)y(r,n=e[i++])&&(~rt(o,n)||o.push(n));return o}(t,ot)},ct=u?Object.defineProperties:function(t,e){i(t);for(var n,r=ut(e),o=r.length,u=0;o>u;)p.f(t,n=r[u++],e[n]);return t},at=e.document,st=at&&at.documentElement,lt=nt("IE_PROTO"),ft=function(){},pt=function(){var t,e=s("iframe"),n=ot.length;for(e.style.display="none",st.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),pt=t.F;n--;)delete pt.prototype[ot[n]];return pt()},ht=Object.create||function(t,e){var n;return null!==t?(ft.prototype=i(t),n=new ft,ft.prototype=null,n[lt]=t):n=pt(),void 0===e?n:ct(n,e)},vt=p.f,dt=F("toStringTag"),yt=function(t,e,n){t&&!y(t=n?t:t.prototype,dt)&&vt(t,dt,{configurable:!0,value:e})},mt={};v(mt,F("iterator"),function(){return this});var gt=function(t,e,n){t.prototype=ht(mt,{next:h(1,n)}),yt(t,e+" Iterator")},_t=nt("IE_PROTO"),bt=Object.prototype,xt=Object.getPrototypeOf||function(t){return t=O(t),y(t,_t)?t[_t]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?bt:null},St=F("iterator"),kt=!([].keys&&"next"in[].keys()),It=function(){return this},wt=function(t,e,n,r,i,o,u){gt(n,e,r);var c,a,s,l=function(t){if(!kt&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},f=e+" Iterator",p="values"==i,h=!1,d=t.prototype,y=d[St]||d["@@iterator"]||i&&d[i],m=y||l(i),g=i?p?l("entries"):m:void 0,_="Array"==e&&d.entries||y;if(_&&(s=xt(_.call(new t)))!==Object.prototype&&s.next&&(yt(s,f,!0),"function"!=typeof s[St]&&v(s,St,It)),p&&y&&"values"!==y.name&&(h=!0,m=function(){return y.call(this)}),(kt||h||!d[St])&&v(d,St,m),Q[e]=m,Q[f]=It,i)if(c={values:p?m:l("values"),keys:o?m:l("keys"),entries:g},u)for(a in c)a in d||b(d,a,c[a]);else k(k.P+k.F*(kt||h),e,c);return c}(Array,"Array",function(t,e){this._t=Y(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,J(1)):J(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Q.Arguments=Q.Array,$("keys"),$("values"),$("entries");for(var Et=F("iterator"),Ct=F("toStringTag"),Ot=Q.Array,Lt={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},jt=ut(Lt),At=0;At<jt.length;At++){var Tt,Pt=jt[At],Rt=Lt[Pt],Mt=e[Pt],Ft=Mt&&Mt.prototype;if(Ft&&(Ft[Et]||v(Ft,Et,Ot),Ft[Ct]||v(Ft,Ct,Pt),Q[Pt]=Ot,Rt))for(Tt in wt)Ft[Tt]||b(Ft,Tt,wt[Tt],!0)}var Kt,Nt,Dt=function(t){return function(e,n){var r,i,o=String(C(e)),u=A(n),c=o.length;return u<0||u>=c?t?"":void 0:(r=o.charCodeAt(u))<55296||r>56319||u+1===c||(i=o.charCodeAt(u+1))<56320||i>57343?t?o.charAt(u):r:t?o.slice(u,u+2):i-56320+(r-55296<<10)+65536}}(!0),Ht=function(t,e,n){return e+(n?Dt(t,e).length:1)},Gt=F("toStringTag"),$t="Arguments"==w(function(){return arguments}()),Vt=RegExp.prototype.exec,qt=function(t,e){var n,r,i,o,u=t.exec;if("function"==typeof u){var c=u.call(t,e);if("object"!=typeof c)throw new TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==(void 0===(n=t)?"Undefined":null===n?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(r=Object(n),Gt))?i:$t?w(r):"Object"==(o=w(r))&&"function"==typeof r.callee?"Arguments":o))throw new TypeError("RegExp#exec called on incompatible receiver");return Vt.call(t,e)},Bt=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Xt=RegExp.prototype.exec,Ut=String.prototype.replace,Wt=Xt,zt=(Kt=/a/,Nt=/b*/g,Xt.call(Kt,"a"),Xt.call(Nt,"a"),0!==Kt.lastIndex||0!==Nt.lastIndex),Jt=void 0!==/()??/.exec("")[1];(zt||Jt)&&(Wt=function(t){var e,n,r,i,o=this;return Jt&&(n=new RegExp("^"+o.source+"$(?!\\s)",Bt.call(o))),zt&&(e=o.lastIndex),r=Xt.call(o,t),zt&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Jt&&r&&r.length>1&&Ut.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var Qt=Wt;k({target:"RegExp",proto:!0,forced:Qt!==/./.exec},{exec:Qt});var Yt=F("species"),Zt=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),te=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}(),ee=Math.max,ne=Math.min,re=Math.floor,ie=/\$([$&`']|\d\d?|<[^>]*>)/g,oe=/\$([$&`']|\d\d?)/g;function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function se(t,e,n){return e&&ae(t.prototype,e),n&&ae(t,n),t}function le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pe(t,e){return(pe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function he(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}!function(t,e,n){var r=F(t),i=!o(function(){var e={};return e[r]=function(){return 7},7!=""[t](e)}),u=i?!o(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[Yt]=function(){return n}),n[r](""),!e}):void 0;if(!i||!u||"replace"===t&&!Zt||"split"===t&&!te){var c=/./[r],a=n(C,r,""[t],function(t,e,n,r,o){return e.exec===Qt?i&&!o?{done:!0,value:c.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),s=a[0],l=a[1];b(String.prototype,t,s),v(RegExp.prototype,r,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)})}}("replace",2,function(t,e,n,r){return[function(r,i){var o=t(this),u=null==r?void 0:r[e];return void 0!==u?u.call(r,o,i):n.call(String(o),r,i)},function(t,e){var u=r(n,t,this,e);if(u.done)return u.value;var c=i(t),a=String(this),s="function"==typeof e;s||(e=String(e));var l=c.global;if(l){var f=c.unicode;c.lastIndex=0}for(var p=[];;){var h=qt(c,a);if(null===h)break;if(p.push(h),!l)break;""===String(h[0])&&(c.lastIndex=Ht(a,P(c.lastIndex),f))}for(var v,d="",y=0,m=0;m<p.length;m++){h=p[m];for(var g=String(h[0]),_=ee(ne(A(h.index),a.length),0),b=[],x=1;x<h.length;x++)b.push(void 0===(v=h[x])?v:String(v));var S=h.groups;if(s){var k=[g].concat(b,_,a);void 0!==S&&k.push(S);var I=String(e.apply(void 0,k))}else I=o(g,a,_,b,S,e);_>=y&&(d+=a.slice(y,_)+I,y=_+g.length)}return d+a.slice(y)}];function o(t,e,r,i,o,u){var c=r+t.length,a=i.length,s=oe;return void 0!==o&&(o=O(o),s=ie),n.call(u,s,function(n,u){var s;switch(u.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=o[u.slice(1,-1)];break;default:var l=+u;if(0===l)return n;if(l>a){var f=re(l/10);return 0===f?n:f<=a?void 0===i[f-1]?u.charAt(1):i[f-1]+u.charAt(1):n}s=i[l-1]}return void 0===s?"":s})}}),u&&"g"!=/./g.flags&&p.f(RegExp.prototype,"flags",{configurable:!0,get:Bt});var ve=/./.toString,de=function(t){b(RegExp.prototype,"toString",t,!0)};o(function(){return"/a/b"!=ve.call({source:"a",flags:"b"})})?de(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!u&&t instanceof RegExp?Bt.call(t):void 0)}):"toString"!=ve.name&&de(function(){return ve.call(this)});var ye=D(5),me=!0;"find"in[]&&Array(1).find(function(){me=!1}),k(k.P+k.F*me,"Array",{find:function(t){return ye(this,t,arguments.length>1?arguments[1]:void 0)}}),$("find");var ge={f:Object.getOwnPropertySymbols},_e={f:{}.propertyIsEnumerable},be=Object.assign,xe=!be||o(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=be({},t)[n]||Object.keys(be({},e)).join("")!=r})?function(t,e){for(var n=O(t),r=arguments.length,i=1,o=ge.f,u=_e.f;r>i;)for(var c,a=E(arguments[i++]),s=o?ut(a).concat(o(a)):ut(a),l=s.length,f=0;l>f;)u.call(a,c=s[f++])&&(n[c]=a[c]);return n}:be;k(k.S+k.F,"Object",{assign:xe});var Se=document,ke=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ce(this,t),this.options=Object.assign({},r,n),this._events=[],this.dom={el:this._setElement(e)}}return se(t,[{key:"on",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(n||this.dom.el).addEventListener(t,e=e.bind(this),!0),this._events.push({name:t,fn:e,el:n}),this}},{key:"getElement",value:function(){return this.dom.el}},{key:"remove",value:function(){var t=this;this._events=this._events.filter(function(e){return(e.el||t.dom.el).removeEventListener(e.name,e.fn,!0)}),this.dom.el.parentNode.removeChild(this.dom.el),this.dom=this.options=null}},{key:"_setElement",value:function(t){if(!t&&!t.nodeType&&"string"!=typeof t)throw new Error("Wrong element type provided!");return t.nodeType?t:(this.options.parent||Se).querySelector(t)}},{key:"_trigger",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"function"==typeof CustomEvent?e=new CustomEvent(t,{detail:n,bubbles:!0,cancelable:!0}):(e=Se.createEvent("Event")).initEvent(t,!0,!0),this.dom.el.dispatchEvent(e)}}]),t}(),Ie={parent:null,items:[],current:null,allowAdd:!0,proposal:"Add {X} to the list?",notFound:"{X} not present in the list",allowRemove:!0,removalIcon:"&times;",placeHolder:"Type to search",sort:!0,order:"desc",maxHeight:0,onDelete:null,onCreate:null,valueKey:"value",textKey:"value"},we=document;return function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ce(this,e),n=he(this,fe(e).call(this,t,r,Ie));var i=r.current?n._convertItem(r.current):null;return n.options.items=n._convertItems(r.items),n.current=n.findItem(i[r.valueKey]),n.__found=null,n.options.sort&&n._sortItems(),n._renderInit(),n._bindEvents(),n.current&&(n.dom.input.value=n.current[r.textKey]),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pe(t,e)}(e,ke),se(e,[{key:"_bindEvents",value:function(){var t=this,e=function(e){"Escape"!==e.key&&27!==e.keyCode&&t.dom.el.contains(e.target)||t.toggle(!1)};this.on("input",this._search),this.on("click",this._handleClick),this.on("keyup",this._handleKey),this.on("focusin",function(){return t._renderListItems().toggle(!0)},this.dom.input),this.on("keyup",e,we),this.on("click",e,we)}},{key:"onDelete",value:function(t){return this.options.onDelete=t,this}},{key:"onCreate",value:function(t){return this.options.onCreate=t,this}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.dom.el.firstElementChild.classList[t?"remove":"add"]("si-hide"),t||this.dom.input.blur(),this}},{key:"getItems",value:function(){return this.options.items}},{key:"getCurrent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=Object.assign({},this.current);return delete e._lc_value,delete e._lc_text,t?e[t]:e}},{key:"clearCurrent",value:function(){this.current=null,this.dom.input.value="",this._clearSelected()}},{key:"findItem",value:function(t){var e=this.options;return t=t.nodeName?t.dataset.value:t,e.items.find(function(n){return n[e.valueKey]===t})}},{key:"setCurrent",value:function(t){return this._setCurrent(t?this.findItem(t):null),this}},{key:"_setCurrent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.dom.input.value=t?t[this.options.textKey].toString():"",t?(this.current=t,this._setSelected(t,e)):(this.current=null,this._clearSelected()),this}},{key:"_setSelected",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._clearSelected(),(e=e||this.dom.list.querySelector('li[data-value="'.concat(t[this.options.valueKey],'"]')))&&e.classList.add("si-current")}},{key:"_clearSelected",value:function(){var t=this.dom.list.querySelector(".si-current");t&&t.classList.remove("si-current")}},{key:"_convertItems",value:function(){var t=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return t._convertItem(e)})}},{key:"_convertItem",value:function(t){var e,n=this.options;return(t="object"!==ue(t)?(le(e={},n.valueKey,t),le(e,n.textKey,t),e):t)._lc_value=t[n.valueKey].toString().toLowerCase().replace(/\s+/g,"-"),t._lc_text=t[n.textKey].toString().toLowerCase().replace(/\s+/g,"-"),t}},{key:"_renderInit",value:function(){var t=we.createElement("div");return t.className="si-wrap si-hide",this.dom.input=t.appendChild(this._renderInput()).firstChild,this.dom.list=t.appendChild(this._renderList()).firstChild,this.dom.el.appendChild(t)}},{key:"_renderInput",value:function(){var t=we.createElement("div"),e=we.createElement("input");return t.className="si-input",e.type="text",e.autocomplete="false",e.spellcheck=!1,e.placeholder=this.options.placeHolder,t.appendChild(e),t}},{key:"_renderList",value:function(){var t=we.createElement("div"),e=we.createElement("ul"),n=this.options.maxHeight;return t.className="si-list",n&&(t.style.maxHeight=n+"px"),t.appendChild(e),t}},{key:"_createListItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="",n=this.options,r=this.getCurrent(n.valueKey),i=n.allowRemove?this._createRemovalButton():"",o="",u="";return t.forEach(function(t){o=t[n.valueKey],u=t[n.textKey],e+='<li class="si-item'.concat(r&&o===r?" si-current":"",'" data-value="').concat(o,'">').concat(u).concat(i,"</li>")}),e}},{key:"_renderListItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.dom.list.innerHTML=t||this._createListItems(this.options.items),this}},{key:"_createRemovalButton",value:function(){return'<button type="button" class="si-removal">'.concat(this.options.removalIcon,"</button>")}},{key:"_search",value:function(t){var e=this.options,n=t.target.value,r=n.toLowerCase().replace(/\s+/g,"-"),i=e.items.filter(function(t){return-1!==t._lc_value.indexOf(r)||-1!==t._lc_text.indexOf(r)}),o=i||e.allowAdd?this._createListItems(i):"",u=i[0],c=i.length;1===c&&(this.__found=u),(c>1||!c||!n)&&(this.__found=null),e.allowAdd&&n&&(!u||r!==u._lc_text&&r!==u._lc_value)?o+=this._proposeItem(n):e.allowAdd||(o+=this._notFoundItem(n)),this._renderListItems(o)}},{key:"_proposeItem",value:function(t){var e=this.options.proposal.replace("{X}","<span>".concat(t,"</span>"));return'<li class="si-item si-append si-proposal" data-term="'.concat(t,'">').concat(e,"</li>")}},{key:"_notFoundItem",value:function(t){var e=this.options.notFound.replace("{X}","<span>".concat(t,"</span>"));return'<li class="si-item si-append si-not-found">'.concat(e,"</li>")}},{key:"_handleClick",value:function(t){var e=t.target,n=e.classList;this.options.allowAdd&&n.contains("si-proposal")?this._tryCreateItem(e.dataset.term)&&this.toggle()._trigger("created",this.current):n.contains("si-item")?this._setCurrent(this.findItem(e),e).toggle()._trigger("selected",this.current):this.options.allowRemove&&n.contains("si-removal")&&(e=e.parentNode,this._fireCallback("onDelete",this.findItem(e))&&this._trigger("removed",this._sliceItem(e)))}},{key:"_fireCallback",value:function(t,e){return"function"!=typeof this.options[t]||this.options[t](e)}},{key:"_handleKey",value:function(t){var e,n=t.target.value,r=this.__found;(!n||13===t.keyCode&&"Enter"===t.key)&&(!r&&n&&this.options.allowAdd?e=this._tryCreateItem(n)?"created":null:r&&(e="selected",this._setCurrent(r)),e&&this.toggle()._trigger(e,this.current))}},{key:"_tryCreateItem",value:function(t){var e=this._convertItem(t.trim());return!(this.findItem(t)||!this._fireCallback("onCreate",e))&&(this._setCurrent(this._insertItem(e)),!0)}},{key:"_insertItem",value:function(t){return this.options.items.push(t),this.options.sort&&this._sortItems(),t}},{key:"_sortItems",value:function(){var t="desc"===this.options.order?1:-1;this.options.items.sort(function(e,n){return e._lc_text<n._lc_text?-t:e._lc_text>n._lc_text?t:0})}},{key:"_sliceItem",value:function(t){var e,n=this.options.items,r=t.dataset.value.toLowerCase(),i=this.current;return this.dom.list.removeChild(t),e=n.splice(n.findIndex(function(t){return t._lc_value===r}),1).shift(),i&&e._lc_value===i._lc_value&&this.clearCurrent(),e}}]),e}()});
//# sourceMappingURL=select-input-umd.js.map
